# CVE-2022-4804

* This vulnerability affects https://github.com/usememos/memos, prior to version 0.9.1
* https://nvd.nist.gov/vuln/detail/CVE-2022-4804

## Changing Visibility of Other Users' Memos

An attacker can make a private memo into a public memo in order to view it. All the attacker needs to know is the memo ID, then they can make a `PATCH` request to the `/api/memo/<memo ID>` endpoint with the following request data:

`{"id":<MEMO ID>,"visibility":"PUBLIC","resourceIdList":[]}`

Then they simply need to visit the memo URL. The memo URL format is similar to this: `https://demo.usememos.com/m/<MEMO ID>`

Then the attacker can view the memo which was meant to be private.

## Reproduction Steps

1. Create two accounts: testdemouser1 & testdemouser2
2. On testdemouser1, create a private memo
3. From the testdemouser2 account, make a PATCH request to the `/api/memo<memo ID>` endpoint with the requ
   est data mentioned earlier, filling out the appropriate memo ID parameters
4. Then from testdemouser2, access the memo. You should now be able to access the memo which was meant to 
   be private.

You can access a python script to exploit this vulnerability here:
